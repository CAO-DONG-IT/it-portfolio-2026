# Network Basics Notes（Day3）
## 前提
- 日付：未記載
- 目的：ネットワーク基礎（用語・CIDR・サブネット計算・一次切り分け）を最短で復習できる形に整理する

## 用語（JP / EN / 中文）
| JP | EN | 中文 | 補足 |
| --- | --- | --- | --- |
| IPアドレス | IP address | IP地址 | 端末/IF（インターフェース）の論理アドレス |
| サブネットマスク / CIDR | subnet mask / CIDR | 子网掩码 / CIDR | ネットワーク部とホスト部を分けるルール |
| デフォルトゲートウェイ | default gateway | 默认网关 | 異なるネットワーク宛の通信を中継するルータIFのIP |
| ホスト | host | 主机 | IP通信に参加する機器（PC/サーバ/ルータ等） |
| エンドポイント | endpoint | 端点 | 通信の終端（主にPC/サーバなど） |
| ターミナル | terminal | 终端 | 操作の入口（CLI画面/SSHセッション） |
| ループバック | loopback | 回环 | 自分自身に戻すためのIF/アドレス |
| ネットワークアドレス | network address | 网络地址 | ホスト部が全0 |
| ブロードキャストアドレス | broadcast address | 广播地址 | ホスト部が全1 |
| 有効ホスト範囲 | usable host range | 可用主机范围 | 通常は NW+1 ～ BC-1 |
| ブロックサイズ | block size | 块大小 | サブネット開始位置の刻み（256-マスク値） |


## 1) 127.0.0.1（ループバック）の意味
- `127.0.0.1` は **自分自身** を指す（ローカルTCP/IPスタック確認）
- `ping 127.0.0.1`：OS内のTCP/IPが動いているかの確認（NICや外部回線の確認ではない）
- NIC/外部疎通の確認例：
  - `ping <デフォルトゲートウェイ>`（同一サブネット内の疎通）
  - `ping 1.1.1.1`（外部IPへの疎通）

---

## 2) Class（A〜E）とCIDR（/n）
- Class（A=/8、B=/16、C=/24）は **クラスフル（旧方式）** の分類
- 実運用は CIDR（/n）で設計する（例：/26、/28 など）
- VLSM（可変長サブネット）は、同一アドレス空間で複数の / 長さを混在させる設計

---

## 3) 既定マスク（覚え方）
- `/8  ：255.0.0.0`
- `/16：255.255.0.0`
- `/24：255.255.255.0`
- 共通ルール：
  - NW（ネットワークアドレス）＝ホスト部が全0
  - BC（ブロードキャストアドレス）＝ホスト部が全1

---

## 4) ブロックサイズと範囲算出（最小ルール）
### 4.1 ブロックサイズ（255.255.255.X の場合）
- ブロックサイズ ＝ `256 - X`
- NW は「ブロックサイズの倍数の開始位置」
- BC ＝ `NW + ブロックサイズ - 1`
- 有効ホスト ＝ `NW + 1 ～ BC - 1`
- ホスト数 ＝ `2^(ホスト部ビット数) - 2`

### 4.2 例：192.168.10.66/28（255.255.255.240）
- ブロックサイズ：16（256-240）
- 範囲：64～79（66 はこの範囲に入る）
- NW：192.168.10.64
- BC：192.168.10.79
- 有効ホスト：192.168.10.65～192.168.10.78
- ホスト数：14（2^4-2）
- 注意：NW が 65 ではない（NW はホスト部が全0）

### 4.3 /26 の等長分割（/24 → 4分割）
- ブロックサイズ：64
- 範囲：0～63 / 64～127 / 128～191 / 192～255
- 等長分割（同じ /n）は VLSM ではない（/n を揃える）

---

## 5) Network Troubleshooting（一次切り分け：最小フロー）
### 5.1 先に整理する
- いつ／どこで／何が起きたか（現象・対象・再現手順）
- 影響範囲（自分だけ？全員？特定ネットワークだけ？）

### 5.2 確認順（L3 → DNS → 経路 → L7）
1. IP疎通（L3）：`ping 1.1.1.1`
2. DNS（名前解決）：`nslookup example.com`
3. 経路：`tracert 1.1.1.1`（Windows） / `traceroute 1.1.1.1`（Linux）
4. HTTP（L7）：`curl -I https://example.com`（PowerShell は `curl.exe` 推奨）

### 5.3 ひとこと（面接での説明用）
- 「IP疎通→DNS→経路→HTTP の順で確認し、どの層で失敗しているかを切り分けます」
